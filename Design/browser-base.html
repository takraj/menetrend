<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Menetrend böngésző</title>
        
        <link href="js/jquery-ui-1.11.2.custom/jquery-ui.css" rel="stylesheet" type="text/css" />
        <link href="js/fancytree/skin-win7/ui.fancytree.css" rel="stylesheet" type="text/css">
        <link href="tps-web.css" rel="stylesheet" type="text/css" />
        <link href='http://fonts.googleapis.com/css?family=Play:400,700&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
        <link href='http://fonts.googleapis.com/css?family=Dosis:400,700&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
    </head>

    <body>
        <header>
            <img id="header-logo" src="img/routes-icon.png" />
            <h1>Menetrendkereső Szolgáltatás</h1>
            <nav>
                <ul>
                    <li>
                        <a href="#">Útvonaltervezés</a>
                    </li>
                    <li class="selected">
                        <a href="#">Menetrend Böngészése</a>
                    </li>
                    <li>
                        <a href="#">Adminisztráció</a>
                    </li>
                </ul>
            </nav>
        </header>
        
        <div id="content">            
            <main>
                <h2 class="whattodo">Kérlek válassz járatot vagy megállót!</h2>
            </main>
            
            <aside>
                <form onsubmit="return validate()">
                    <input id="tree-id" name="mode" type="hidden" />
                    <fieldset id="browser-calendar">
                        <legend>Menetrend Naptár</legend>
                        
                        <input id="calendar-year" name="year" type="hidden" />
                        <input id="calendar-month" name="month" type="hidden" />
                        <input id="calendar-day" name="day" type="hidden" />
                        <div id="browser-calendar-date-placeholder" />
                    </fieldset>
                    
                    <div id="browser-routes-and-stops">
                        <ul>
                            <li><a href="#browser-routes-tab">Járatok</a></li>
                            <li><a href="#browser-stops-tab">Megállók</a></li>
                        </ul>
                        
                        <div id="browser-routes-tab">
                            <input type="text" placeholder="Szűrés" id="browser-filter-routes" />
                            <input id="tree-route-id" name="route" type="hidden" />
                            <div id="browser-routes-tree"></div>
                        </div>
                        
                        <div id="browser-stops-tab">
                            <input type="text" placeholder="Szűrés" id="browser-filter-stops" />
                            <input id="tree-stop-id" name="stop" type="hidden" />
                            <div id="browser-stops-list"></div>
                        </div>
                    </div>
                    <div id="browser-buttons">
                        <button id="mutasd" onclick="fillform()">Mutasd</button>
                    </div>
                </form>
            </aside>
        </div>
        
        <script src="js/jquery-ui-1.11.2.custom/external/jquery/jquery.js"></script>
        <script src="js/jquery-ui-1.11.2.custom/jquery-ui.js"></script>
        
        <script src="js/fancytree/src/jquery.fancytree.js" type="text/javascript"></script>
        <script src="js/fancytree/src/jquery.fancytree.filter.js" type="text/javascript"></script>
        
        <script src="js/menetrend.js" type="text/javascript"></script>
        
        <script>
            $("#browser-routes-and-stops").tabs();
            
            TUSZ.create_datepicker("#browser-calendar-date-placeholder", new Date(2013, 4, 3), new Date(2013, 3, 3), new Date(2015, 4, 12));
            
            // routes
            
            var tree_folders = [];
            
            var tree_children = [];
            var tree_children = TUSZ.add_item_to_children(tree_children, "T0", "id100");
            var tree_children = TUSZ.add_item_to_children(tree_children, "T1", "id101");
            var tree_children = TUSZ.add_item_to_children(tree_children, "T2", "id102");
            var tree_children = TUSZ.add_item_to_children(tree_children, "T3", "id103");
            var tree_children = TUSZ.add_item_to_children(tree_children, "T4", "id104");
            
            tree_folders = TUSZ.add_folder_to_tree_data(tree_folders, "F1", "idf1", tree_children);
            
            var tree_children = [];
            var tree_children = TUSZ.add_item_to_children(tree_children, "C0", "id200");
            var tree_children = TUSZ.add_item_to_children(tree_children, "C1", "id201");
            var tree_children = TUSZ.add_item_to_children(tree_children, "C2", "id202");
            var tree_children = TUSZ.add_item_to_children(tree_children, "C3", "id203");
            var tree_children = TUSZ.add_item_to_children(tree_children, "C4", "id204");
            
            tree_folders = TUSZ.add_folder_to_tree_data(tree_folders, "Z1", "idf1", tree_children);
            
            TUSZ.create_filterable_tree("#browser-routes-tree", "#browser-filter-routes", tree_folders);
            
            // stops
            
            var tree_children = [];
            var tree_children = TUSZ.add_item_to_children(tree_children, "S0", "id10");
            var tree_children = TUSZ.add_item_to_children(tree_children, "S1", "id11");
            var tree_children = TUSZ.add_item_to_children(tree_children, "S2", "id12");
            var tree_children = TUSZ.add_item_to_children(tree_children, "S3", "id13");
            var tree_children = TUSZ.add_item_to_children(tree_children, "S4", "id14");
            
            TUSZ.create_filterable_tree("#browser-stops-list", "#browser-filter-stops", tree_children);
            
            function fillform() {
                var selected_date = TUSZ.get_date_from_datepicker("#browser-calendar-date-placeholder");
                $("#calendar-year").val(selected_date.getFullYear());
                $("#calendar-month").val(selected_date.getMonth() + 1);
                $("#calendar-day").val(selected_date.getDate());
                
                var active_tab = $("#browser-routes-and-stops").tabs('option', 'active');
                $("#tree-id").val(active_tab);
                
                if (active_tab == 0) {
                    var selected_route = TUSZ.get_selection_from_tree("#browser-routes-tree");
                    $("#tree-route-id").val(selected_route);
                    $("#tree-stop-id").val("");
                } else if (active_tab == 1) {
                    var selected_stop = TUSZ.get_selection_from_tree("#browser-stops-list");
                    $("#tree-stop-id").val(selected_stop);
                    $("#tree-route-id").val("");
                } else {
                    $("#tree-stop-id").val("");
                    $("#tree-route-id").val("");
                }
            }
            
            function validate() {
                if (($("#tree-stop-id").val() == "") && ($("#tree-route-id").val() == "")) {
                    alert("Kérlek válassz járatot vagy megállót a listából!");
                    return false;
                }
                
                return true;
            }
        </script>

    </body>
</html>
